<ngx-spinner
    bdColor="rgba(0, 0, 0, 0.8)"
    size="medium"
    color="#ffffff"
    type="timer"
    [fullScreen]="true"
>
    <p style="color: white">Loading...</p>
</ngx-spinner>

<div class="heading text-center">
    <h3>Configured Gate List</h3>
</div>

<div class="equip-dtable">
    <table
        id="dataTable"
        datatable=""
        dt-options="dtOptions"
        dt-columns="dtColumns"
        class="
            table table-striped table-bordered table-responsive table-sm
            row-border
            hover
            display
            nowrap
        "
        *ngIf="this.temp"
    >
        <thead>
            <tr>
                <th style="width: 200px">Gate Name</th>
                <th>Device ID</th>
                <th style="width: 200px">Direction Indicator</th>
                <th style="width: 200px">Direction Name</th>
                <th style="width: 200px">Mode Name</th>
                <th style="width: 200px">Emergency Mode Name</th>
                <th style="width: 200px">Aisle Mode</th>
                <th style="width: 200px">Que Length</th>
                <th style="width: 200px">Flap Safety Time</th>
                <th style="width: 200px">Gate Reset Time</th>
                <th style="width: 200px">Buzzer Volume</th>
                <th style="width: 200px">Light Intensity</th>
                <th style="width: 200px">Sensor InAct Time</th>
                <th style="width: 200px">Version</th>
                <th style="width: 200px">Action Type</th>
                <th>Activation Time</th>
                <th>Deactivation Time</th>
                <th>Configured Date</th>
                <th style="width: 200px">Update</th>
                <th>Raise Complaint</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let list of configuredList">
                <td>{{ list.gateName }}</td>
                <td>{{ list.deviceId }}</td>
                <td>{{ list.directionIndicatorName }}</td>
                <td>{{ list.directionName }}</td>
                <td>{{ list.modeName }}</td>
                <td>{{ list.emergencyModeName }}</td>
                <td>{{ list.aisleModeName }}</td>
                <td>{{ list.queLength }}</td>
                <td>{{ list.flapTime }}</td>
                <td>{{ list.gateResetTime }}</td>
                <td>{{ list.buzzerVolume }}</td>
                <td>{{ list.lightIntensity }}</td>
                <td>{{ list.sit }}</td>
                <td>{{ list.version }}</td>
                <td>{{ list.actionType }}</td>
                <td>{{ list.activationTime | date: "medium" }}</td>
                <td>{{ list.deactivationTime | date: "medium" }}</td>
                <td>{{ list.createdDate | date: "medium" }}</td>
                <td>
                    <button
                        type="button"
                        class="btn btn-warning editBtn"
                        (click)="editConfig(list)"
                    >
                        <i class="fa fa-pencil-square-o"></i>
                        Edit
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-info raiseBtn" (click)="raiseComplain(list.deviceId)">
                        <i class="fa fa-hand-paper-o"></i>
                    </button>
                </td>

                <!-- <td>
                    <button class="btn btn-info raiseBtn" (click)="openAssignModel(assignTemplate)">
                        <i class="fa fa-hand-paper-o"></i>
                    </button>
                    <ng-template #assignTemplate>
                        <div class="model-dialog model-lg">
                            <div class="modal-header">
                                <h4 class="modal-title pull-left">
                                    Raise Complaint
                                </h4>
                                <button type="button" class="close pull-right" aria-label="Close"
                                    (click)="modalRef.hide()">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>


                            <div class="modal-body">
                                <form [formGroup]="complaintForm" (ngSubmit)="onAccept(complaintForm.value)">
                                    <div class="row">

                                        <div class="col-md-12">
                                            <label for="deviceId">
                                                <b>Device ID</b> -
                                            </label>

                                            <input type="text" [ngModel]="list.deviceId" class="form-control" formControlName="deviceId" placeholder="Enter Device ID here..."
                                                [ngClass]="{'is-invalid': submitted && fval.deviceId.errors}"
                                                 readonly/>
                                            <div *ngIf="submitted && fval.deviceId.errors" class="invalid-feedback">
                                                <div *ngIf="fval.deviceId.errors.required">
                                                    This is required !
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="col-md-12">
                                            <label for="problemDescription">
                                                <b>Problem Description</b> -
                                            </label>
                                            <textarea rows="3" class="form-control" formControlName="problemDescription"
                                                placeholder="Enter problem description here..."
                                                [ngClass]="{'is-invalid': submitted && fval.problemDescription.errors}">
                                                            </textarea>
                                            <div *ngIf="submitted && fval.problemDescription.errors" class="invalid-feedback">
                                                <div *ngIf="fval.problemDescription.errors.required">
                                                    This is required !
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary sendBtn" [disabled]="complaintForm.invalid">
                                            Send
                                        </button>

                                    </div>
                                </form>
                            </div>
                        </div>
                    </ng-template>
                </td> -->
            </tr>
        </tbody>
    </table>
</div>
